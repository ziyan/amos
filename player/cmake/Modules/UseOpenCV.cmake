CMAKE_MINIMUM_REQUIRED (VERSION 2.4 FATAL_ERROR)
IF (COMMAND CMAKE_POLICY)
    CMAKE_POLICY (SET CMP0003 NEW)
    IF (POLICY CMP0011)
        CMAKE_POLICY (SET CMP0011 NEW)
    ENDIF (POLICY CMP0011)
ENDIF (COMMAND CMAKE_POLICY)

INCLUDE (FindPkgConfig)
IF (NOT PKG_CONFIG_FOUND)
    SET (OPENCV_CFLAGS "")
    SET (OPENCV_INCLUDE_DIRS )
    LIST (APPEND OPENCV_INCLUDE_DIRS "/usr/include")
    SET (OPENCV_LINK_LIBS m;z)
    LIST (APPEND OPENCV_LINK_LIBS "cv")
    LIST (APPEND OPENCV_LINK_LIBS "cvaux")
    LIST (APPEND OPENCV_LINK_LIBS "highgui")
    SET (OPENCV_LIBRARY_DIRS )
    LIST (APPEND OPENCV_LIBRARY_DIRS "/usr/lib")
    SET (OPENCV_LINK_FLAGS "")
ELSE (NOT PKG_CONFIG_FOUND)
    pkg_check_modules (OPENCV_PKG REQUIRED opencv)
    IF (OPENCV_PKG_CFLAGS_OTHER)
        LIST_TO_STRING (OPENCV_CFLAGS "${OPENCV_PKG_CFLAGS_OTHER}")
    ELSE (OPENCV_PKG_CFLAGS_OTHER)
        SET (OPENCV_CFLAGS_OTHER "")
    ENDIF (OPENCV_PKG_CFLAGS_OTHER)
    SET (OPENCV_INCLUDE_DIRS ${OPENCV_PKG_INCLUDE_DIRS})
    SET (OPENCV_LINK_LIBS ${OPENCV_PKG_LIBRARIES})
    SET (OPENCV_LIBRARY_DIRS ${OPENCV_PKG_LIBRARY_DIRS})
    IF (OPENCV_PKG_LDFLAGS_OTHER)
        LIST_TO_STRING (OPENCV_LINK_FLAGS ${OPENCV_PKG_LDFLAGS_OTHER})
    ELSE (OPENCV_PKG_LDFLAGS_OTHER)
        SET (OPENCV_LINK_FLAGS "")
    ENDIF (OPENCV_PKG_LDFLAGS_OTHER)
ENDIF (NOT PKG_CONFIG_FOUND)


